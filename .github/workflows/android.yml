name: Build Android APK
on: [push]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # Собираем .love файл (это просто зип твоих файлов)
      - name: Package .love file
        run: zip -9 -r mygame.love . -x "./.git/*" "./.github/*"

      # Используем актуальный докер-образ для сборки APK
      - name: Build APK using Love-Android
        uses: p0358/love-android-action@v2
        with:
          project_name: "MyVibeCraft"
          love_version: "11.5"
          # Если хочешь свою иконку, положи icon.png в корень папки

      # Загружаем готовый APK (используем v4, как просит GitHub)
      - name: Upload APK artifact
        uses: actions/upload-artifact@v4
        with:
          name: my-game-apk
          path: "*.apk"
